## Develop Shell  

**shellとは**  
 SPAのマスタコントローラ
 ユーザーからの入力を受け、機能モジュールを呼び出す(機能ごとに分けたjsファイル)。  
 それ以降は、機能モジュールがモデルを読んだりする。  
 >「シングル web アプリケーション」では、shellを、機能コンテナを抱合する1つのhtmlファイルとしている。

**shellの役割**  
  -  機能コンテナのレンダリングと管理  
     - *レンダリングするhtmlタグはhtmlファイルに直書きではなく、shellHTMLshellファイルが読み込む.jsファイルから生成されている→機能コンテナのレンダリング*  
     - 機能コンテナに、機能モジュールをバインドする→機能コンテナの管理?*  


  -  アプリケーション状態の管理  
   - 例:  
      1. 訪問ユーザーがアプリケーション初期表示にコンテンツBを表示した。  
      2. その後コンテンツBのページでブックマークを行った。  
      3. 数日後、同じユーザーが(アプリケーションにアクセスし、初期表示後)ブックマークしておいたコンテンツBを表示しようとした。  
      結論→出来ない。 SPAは表示するコンテンツをAjaxによって切り替えているため、URLまで切り替えていないから。  

    - [解決策] アンカーを利用する。  
    http://～～**#this is an anchor(also called a hash)**


  -  機能モジュールの調整  


**機能コンテナと機能モジュールの違い**  
  - 機能コンテナ:機能ごとのUIパーツ   
  - 機能モジュール:機能ごとのjsファイル   
  コンテナはあくまでUIであり、そのコンテナの振る舞いはそのコンテナの機能モジュールが決める。  
  *この本で言われている機能コンテナは上記の通りだが、機能コンテナ用のファイルなど作成する必要はなく、テンプレートファイル(html)に普通にマークアップしていく*

### uriAnchor
  - SPAの各ページをブックマーク可能にしたり、戻るボタン/進むボタンでページを戻す/進めることを可能にするライブラリ  


##  SPAで、jsを読み込む際、jsでHTML要素を生成する場合は、bodyタグ直下にscriptタグを記載してもレンダリングは高速にならない。  
  **しかし、多くの場合、テンプレート部分(ヘッダやナビバー)は最初にレンダリングするので、jsの読み込みはbodyタグ直下に記載してもいいと思う**  
